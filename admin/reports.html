<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reports | Recovery Admin Portal</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.css">
</head>
<body class="admin-body">
    <!-- Top Navigation -->
    <header class="admin-header">
        <div class="logo">
            <i class="fas fa-heartbeat"></i>
            <span>Recovery Admin</span>
        </div>
        <div class="search-bar">
            <input type="text" placeholder="Search users or alerts...">
            <button><i class="fas fa-search"></i></button>
        </div>
        <div class="admin-profile">
            <div class="notifications">
                <i class="fas fa-bell"></i>
                <span class="badge">3</span>
            </div>
            <div class="profile-dropdown">
                <img src="https://via.placeholder.com/40" alt="Admin Avatar">
                <span>Dr. Smith</span>
                <i class="fas fa-chevron-down"></i>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="admin-container">
        <!-- Sidebar Navigation -->
        <nav class="admin-sidebar">
            <ul>
                <li>
                    <a href="dashboard.html">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li>
                    <a href="users.html">
                        <i class="fas fa-users"></i>
                        <span>Users</span>
                    </a>
                </li>
                <li>
                    <a href="alerts.html">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span>Alerts</span>
                        <span class="badge">5</span>
                    </a>
                </li>
                <li class="active">
                    <a href="reports.html">
                        <i class="fas fa-chart-bar"></i>
                        <span>Reports</span>
                    </a>
                </li>
                <li>
                    <a href="interventions.html">
                        <i class="fas fa-hand-holding-medical"></i>
                        <span>Interventions</span>
                    </a>
                </li>
                <li>
                    <a href="privacy.html">
                        <i class="fas fa-shield-alt"></i>
                        <span>Privacy</span>
                    </a>
                </li>
                <li>
                    <a href="settings.html">
                        <i class="fas fa-cog"></i>
                        <span>Settings</span>
                    </a>
                </li>
                <li class="logout">
                    <a href="index.html">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Logout</span>
                    </a>
                </li>
            </ul>
        </nav>

        <!-- Main Content Area -->
        <main class="admin-content">
            <div class="page-header">
                <h1>Reports & Analytics</h1>
                <div class="header-actions">
                    <button class="btn btn-secondary">
                        <i class="fas fa-download"></i> Export Report
                    </button>
                    <button class="btn btn-primary">
                        <i class="fas fa-plus"></i> Schedule Report
                    </button>
                </div>
            </div>

            <!-- Time Period Filter -->
            <div class="filter-section">
                <div class="filter-group">
                    <label>Time Period:</label>
                    <select id="time-period-filter">
                        <option>Last 7 Days</option>
                        <option>Last 30 Days</option>
                        <option>Last 90 Days</option>
                        <option>Custom Range</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>User Group:</label>
                    <select>
                        <option>All Users</option>
                        <option>High Risk Users</option>
                        <option>Moderate Risk Users</option>
                        <option>New Users</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Region:</label>
                    <select>
                        <option>All Regions</option>
                        <option>Melbourne</option>
                        <option>Sydney</option>
                        <option>Brisbane</option>
                    </select>
                </div>
                <div class="filter-group">
                    <button class="btn btn-primary">Apply Filters</button>
                </div>
            </div>

            <!-- Report Summary Cards -->
            <div class="overview-cards">
                <div class="card">
                    <div class="card-icon blue">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="card-info">
                        <h3>Active Users</h3>
                        <p class="card-value">112</p>
                        <p class="card-change positive">88% of total users</p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-icon green">
                        <i class="fas fa-clipboard-check"></i>
                    </div>
                    <div class="card-info">
                        <h3>Check-in Completion</h3>
                        <p class="card-value">76%</p>
                        <p class="card-change positive">+5% from last period</p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-icon orange">
                        <i class="fas fa-hand-holding-medical"></i>
                    </div>
                    <div class="card-info">
                        <h3>Intervention Response</h3>
                        <p class="card-value">82%</p>
                        <p class="card-change positive">+3% from last period</p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-icon red">
                        <i class="fas fa-exclamation-circle"></i>
                    </div>
                    <div class="card-info">
                        <h3>High Risk Events</h3>
                        <p class="card-value">43</p>
                        <p class="card-change negative">+12% from last period</p>
                    </div>
                </div>
            </div>

            <!-- Analytics Charts -->
            <div class="chart-container-row">
                <div class="chart-card">
                    <div class="chart-header">
                        <h3>User Activity Trends</h3>
                        <div class="chart-actions">
                            <button class="btn-icon"><i class="fas fa-download"></i></button>
                            <button class="btn-icon"><i class="fas fa-ellipsis-v"></i></button>
                        </div>
                    </div>
                    <div class="chart-body">
                        <canvas id="userActivityChart"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <div class="chart-header">
                        <h3>Mood Score vs Physiological Data</h3>
                        <div class="chart-actions">
                            <button class="btn-icon"><i class="fas fa-download"></i></button>
                            <button class="btn-icon"><i class="fas fa-ellipsis-v"></i></button>
                        </div>
                    </div>
                    <div class="chart-body">
                        <canvas id="moodPhysioChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="chart-container-row">
                <div class="chart-card">
                    <div class="chart-header">
                        <h3>Intervention Response Breakdown</h3>
                        <div class="chart-actions">
                            <button class="btn-icon"><i class="fas fa-download"></i></button>
                            <button class="btn-icon"><i class="fas fa-ellipsis-v"></i></button>
                        </div>
                    </div>
                    <div class="chart-body">
                        <canvas id="interventionChart"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <div class="chart-header">
                        <h3>Risk Level Distribution</h3>
                        <div class="chart-actions">
                            <button class="btn-icon"><i class="fas fa-download"></i></button>
                            <button class="btn-icon"><i class="fas fa-ellipsis-v"></i></button>
                        </div>
                    </div>
                    <div class="chart-body">
                        <canvas id="riskDistributionChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Scheduled Reports -->
            <div class="panel-card">
                <div class="panel-header">
                    <h3>Scheduled Reports</h3>
                    <button class="btn-text">Manage All</button>
                </div>
                <div class="panel-body">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Report Name</th>
                                <th>Frequency</th>
                                <th>Recipients</th>
                                <th>Last Sent</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Weekly User Activity Summary</td>
                                <td>Weekly (Monday)</td>
                                <td>Clinical Team (5 recipients)</td>
                                <td>May 27, 2025</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn-icon" title="Edit"><i class="fas fa-edit"></i></button>
                                        <button class="btn-icon" title="Download"><i class="fas fa-download"></i></button>
                                        <button class="btn-icon" title="Delete"><i class="fas fa-trash"></i></button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Monthly Risk Assessment</td>
                                <td>Monthly (1st)</td>
                                <td>Management Team (3 recipients)</td>
                                <td>May 1, 2025</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn-icon" title="Edit"><i class="fas fa-edit"></i></button>
                                        <button class="btn-icon" title="Download"><i class="fas fa-download"></i></button>
                                        <button class="btn-icon" title="Delete"><i class="fas fa-trash"></i></button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Daily High Risk User Alert</td>
                                <td>Daily (8:00 AM)</td>
                                <td>Emergency Response Team (4 recipients)</td>
                                <td>Today, 8:00 AM</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn-icon" title="Edit"><i class="fas fa-edit"></i></button>
                                        <button class="btn-icon" title="Download"><i class="fas fa-download"></i></button>
                                        <button class="btn-icon" title="Delete"><i class="fas fa-trash"></i></button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js"></script>
    <script src="admin.js"></script>
    <script>
        // Initialize charts specific to the reports page
        document.addEventListener('DOMContentLoaded', function() {
            // User Activity Chart
            const userActivityChart = document.getElementById('userActivityChart');
            if (userActivityChart) {
                new Chart(userActivityChart, {
                    type: 'line',
                    data: {
                        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                        datasets: [{
                            label: 'App Logins',
                            data: [85, 72, 78, 75, 77, 65, 68],
                            borderColor: '#4285f4',
                            backgroundColor: 'rgba(66, 133, 244, 0.1)',
                            tension: 0.3,
                            fill: true
                        }, {
                            label: 'CBT Check-ins',
                            data: [65, 59, 68, 62, 56, 43, 50],
                            borderColor: '#34a853',
                            backgroundColor: 'rgba(52, 168, 83, 0.1)',
                            tension: 0.3,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'top',
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
            }

            // Mood vs Physiological Data Chart
            const moodPhysioChart = document.getElementById('moodPhysioChart');
            if (moodPhysioChart) {
                new Chart(moodPhysioChart, {
                    type: 'scatter',
                    data: {
                        datasets: [{
                            label: 'Mood vs Heart Rate',
                            data: [
                                {x: 3, y: 95}, {x: 4, y: 90}, {x: 5, y: 85}, 
                                {x: 6, y: 80}, {x: 7, y: 75}, {x: 8, y: 70},
                                {x: 4, y: 92}, {x: 5, y: 87}, {x: 6, y: 83},
                                {x: 7, y: 78}, {x: 8, y: 72}, {x: 9, y: 68}
                            ],
                            backgroundColor: '#4285f4'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                title: {
                                    display: true,
                                    text: 'Mood Score (0-10)'
                                },
                                min: 0,
                                max: 10
                            },
                            y: {
                                title: {
                                    display: true,
                                    text: 'Heart Rate (BPM)'
                                }
                            }
                        }
                    }
                });
            }

            // Intervention Response Chart
            const interventionChart = document.getElementById('interventionChart');
            if (interventionChart) {
                new Chart(interventionChart, {
                    type: 'bar',
                    data: {
                        labels: ['Breathing Exercise', 'Mindfulness', 'Physical Activity', 'Support Call', 'Distraction Technique'],
                        datasets: [{
                            label: 'Completion Rate',
                            data: [85, 72, 90, 65, 78],
                            backgroundColor: '#34a853'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100,
                                ticks: {
                                    callback: function(value) {
                                        return value + '%';
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // Risk Distribution Chart
            const riskDistributionChart = document.getElementById('riskDistributionChart');
            if (riskDistributionChart) {
                new Chart(riskDistributionChart, {
                    type: 'doughnut',
                    data: {
                        labels: ['Normal', 'Moderate Risk', 'High Risk'],
                        datasets: [{
                            data: [65, 23, 12],
                            backgroundColor: ['#34a853', '#fbbc05', '#ea4335']
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'right'
                            }
                        }
                    }
                });
            }
        });
    </script>
</body>
</html>
